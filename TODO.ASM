* $Id: TODO.ASM,v 1.30 2001-10-11 12:39:51 peter Exp $
18.02.00
- написать процедуры вычисления смещения на нулевом уровне давления
(когда операционный усилитель входит в режим "отсечки")
учитывать сигнал прямой
- при начале работы с портом проверить идет ли измерение
  и остановить его, а также запретить заново мерить
- в процедуру обработки прерывания асинхронного порта добавить
  описание работы на случай сигнала break (длинный старт)
24.02.00

- при отключении прибора до потери времени
и привключении прибора в таблицу измерений вносить код ошибки
(без измерения) о том, что прибор выключался


29.02.00
- прочесать код по поводу управления CLRC SXM
- распределение памяти по страницам (глобальные данные)
- на 40 мм почему не доходит?

10.03.00
- если измеренное давление существенно отличается от предыдущего
 то надо добавить пороги этих отличий и соответственно на них реагировать

27.03.00
- сделать вычисляемый коэффициент усиления

11.07.00
- ошибка пережата трубка манжеты
- надо ли вкл/выкл мониторирование

21.08.00
- при окончательном выключении выключать сначала клапан
анализировать снижение давления меньше 15 мм и потом выключать
аналоговое питание


#04.02.00
#- Зыкову algorithm сократить до alg (чтобы не было длинного имени), пожалуйста


29.06.00
сделать реакцию на int3

13.12.00
измерение было начато по нажатию на кнопку (ввести в таблицу опознавательный
бит)
6 бит в таблице измерения в поле секунды отведен под признак
ручного измерения (измерение по нажатой кнопке)
14.12.00
проанализировать влияние супервизора (ресет) на сигнал VBAT
(низкий уровень напряжения батарей) так как при включении 
питания иногда срабатывает датчик батарей
01.01.01
для сертификации
- написать отладочный режим
    - написать фифошку для флешки (половинчатое решение)
- детский режим / взрослый режим (должны быть запрещены измерения,
  если невалидный этот байт)
- защитный 30 секундный интервал
- формулу усреднения спросить у Зыкова

- сделать нормальный писк
- в отладочном режиме накачка выше чем 160 мм.
2001-04-17
- скорость накачки интеллектуальнее сделать (а то "манжета пропускает воздух")
- выдача информации о причинах срабатывания защиты
- 4-8 Мбайт для флеш
- ошибки 80-83 без повтора измерений

< убрать 112 из сертификационной версии
- сделать PPP при включении прибора с сертификационной прошивкой
- в 112 режиме выводит на индикатор давление с основного канала
- програмно выдавать информацию о том, чем зашит прибор

- при блокировке прибора запретить команду стерки флеш

01-06-07 вот такая фи@ня - очень часто начиналось измерение без видимых причин
расшифровка измерений
Изм.N=001  014 ч. 043 мин. 015 сек. 160/160/160  184 уд/мин Error 083 
Изм.N=002  014 ч. 044 мин. 026 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=003  014 ч. 044 мин. 030 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=004  014 ч. 044 мин. 033 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=005  014 ч. 044 мин. 035 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=006  014 ч. 044 мин. 039 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=007  014 ч. 044 мин. 041 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=008  014 ч. 044 мин. 042 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=009  014 ч. 044 мин. 044 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=010  014 ч. 044 мин. 048 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=011  014 ч. 044 мин. 050 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=012  014 ч. 044 мин. 053 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=013  014 ч. 044 мин. 055 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=014  014 ч. 045 мин. 000 сек. 160/160/160  184 уд/мин Error 080 
Изм.N=015  014 ч. 047 мин. 023 сек. 160/160/160  184 уд/мин Error 082 
Изм.N=016  014 ч. 048 мин. 049 сек. 160/160/160  184 уд/мин Error 083 
Изм.N=017  016 ч. 051 мин. 030 сек. 146/122/097  078 уд/мин Error 000 
Изм.N=018  017 ч. 011 мин. 030 сек. 156/120/100  081 уд/мин Error 000 
Изм.N=019  017 ч. 031 мин. 030 сек. 148/114/076  068 уд/мин Error 000 

возможно сломалась кнопка?

- для Александра написать отладочную версию с двумя каналами давления
  один канал без усилителя (9 июня 2001)
- сохранение в стек добавить еще одну команду
  было
	MAR	*,AR7
	POPD    *-,AR1
  стало 
	MAR	*,AR7
	MAR	*+,AR7
	POPD    *-,AR1
- закрывать бит защиты в AVR
- OUTF уже давно не массив, похерить это необходимо в исходниках макросов
- необходимо переделать хранение двух байтов в одном слове для массива
  передаваемого по компорту


- если смещение меньше, чем заданное, то прибо неисправен
- если прибор не удалось запрограммировать (вышли за пределы параметры)
выводить ошибку "не запрограммирован прибор" при нажатии кнопки

- при посылке в spi анализировать ответ авр - адекватно ли отреагировал
  на команду авр
2001.10.02
- надо "упорядочить" инициализацию монитора, чтобы все про все знали,
 что "монитор не инициализирован"
2001-10-11
 если при начале мониторирования нет обмена с AVR
 то измерение не производится (todo - заносить код ошибки во флеш)
