 =[ history ]========================================================
  $Id: HISTORY.ASM,v 1.52 2001-04-26 16:11:01 peter Exp $
  ! и √ - испpавлена ошибка
       - небольшое изменение
      ■ - новая возможность


 =[ 04.02.00 v0.0.0 ]================================================

   Peter
 ■ начинаем вести history
  ADC_V_P.ASM - Процесс обработки значений ADC
   функции void ADC_value_processing()
  BP_INIT.ASM -
  BP_MODUL.ASM
  BP_MODUL.BAT
  BP_MODUL.CMD
  BP206_01.ASM
  BP206.ASM    - главный модуль
  BP206.CMD
  BP206BSS.ASM - переменные в .bss
  BP206CON.ASM - константы
  BP206DEF.ASM
  BP206FLD.ASM
  BP206MAC.ASM - макросы
  BP206SEC.ASM - секции переменных
  BP206VEC.ASM - вектора прерываний
  BPADCPRO.ASM - обработка ADC
  BPDISPL.ASM  - дисплей
  BPFLASH.ASM  - флеш программы
  BPIDLE.ASM
  BPINIT.ASM
  BPINTKEY.ASM - события при нажатии кнопки
  BPINTTIM.ASM - таймерное прерывание
  BPINTU.ASM
  BPMODE.ASM
  BPSERIAL.ASM - последовательный порт
  BPTABLE.ASM
  DIVISION.ASM
  HISTORY.ASM  - история Ж)
  PRESSAUG.ASM
  PROCEDUR.ASM
  PUL_F_E.ASM
  SVAR20.ASM
  TODO.ASM     - чтобы не забыть
  TREND1.ASM
  TREND2.ASM

  trend1.asm и trend2.asm объеденены в один файл trend.asm
  добалено определение True,False
  объявлен макрос m_MaxNumberPlus1 (MaxNumber++)

 =[ 22.06.00 v0.0.1 ]================================================

  AN_SP_UP ASM
   считаем три чекунды на изменении начальных параметров
   высвечиваем номер измерения
   переходим на вычисление начального смещения датчика давления

  ANAL_END ASM
   проверяем окончание (превышение нахождения ) различных режимов

  BP_INIT  ASM для симуляции процессов (начальная инициализация)

  BP_MODUL ASM для симуляции процессов (запуск модулей)

  BP_MODUL CMD для симуляции процессов (сборка объектного модуля)

  BP206    ASM основной файл

  BP206    BAT батник для компиляции

  BP206    CMD сборка объектного модуля

  BP206BSS ASM сегмент данных основной страницы

  BP206CON ASM константы

  BP206DEF ASM дефайнеры

  BP206MAC ASM макросы

  BP206SEC ASM секция данных давления

  BP206VEC ASM вектора прерываний

  BPADCPRO ASM работа с АЦП,ЦАП

  BPDISPL  ASM процедуры отображения на индикаторе

  BPFLASH  ASM общие процедуры работы с флеш

  BPFLASHP ASM аппаратно зависимые модули для работы с параллельной флеш

  BPFLASHS ASM аппаратно зависимые модули для работы с последовательной флеш

  BPIDLE   ASM фоновый модуль работы

  BPINIT   ASM начальная инициализация прибора

  BPINTKEY ASM обработка прерываний кнопки

  BPINTTIM ASM обработка прерывания таймера

  BPINTU   ASM обработка прерывания при разряде батареи

  BPMODE   ASM switch по режимам при измерении давления

  BPSERIAL ASM обработка прерываний при работе с последовательным портом

  BPTABLE  ASM табличные постоянные

  CH_PR_HS ASM
   Проверка превышения систолического давления
   Check_higher_sistol_pressure() -

  DAC_CHCK ASM проверка работы ЦАП (модуль для измерения давления)

  DIVISION ASM процедура деления

  F206POW  ASM

  F206POW  BAT

  F206POW  CMD

  F206POW_ ASM

  F206POW2 ASM

  FLASHPRG       <КАТАЛОГ>    19.06.00  20:45 FLASHPRG
   подкаталог с модулями для программирования программной флеш
   подстроено под 4 Мгц кварцевого генератора в режиме работы
   кристалла деление на 2
  SERA4    ASM
   ERASE subroutine
   TMS320F2XX Flash Utilities.
    Revision: 2.0,  9/10/97
    Revision: 2.1,  1/31/98
    Changes20: Re-written to include latest flash algorithms.
    Changes21: Cleaned up source for release to mass market.
	    Removed redundant call/ret to XOR_erase
	    routine. Changed variable names from B2_ to
	    BASE_ since they're not necessarily stored in
	    B2 RAM. Removed imr modifications. Merged
	    inc_erase sub-routine into erase routine.
	    Referenced constant ENDADDR for address
	    complementing. Added more comments.

  SFLW4    ASM
    FLASH-WRITE subroutine
    TMS320F2XX Flash Utilities.
     Revision: 2.0,  9/10/97
     Revision: 2.1,  1/31/98
    Changes20: Added to the flash utilities for re-covery of
	       over-erased units.
    Changes21: Increased the maximum number of pulses from
	       3000 to 10000, to allow recovery of units that
	       have been severely over-erased because
	       operator error. Changed variable names from
	       B2_ to BASE_. Removed extra branch at top of
	       FLWS. Remove imr modification. Replaced calls
	       to CLR_CMND subroutine with SET_MODE.

  SPGM4    ASM
    PROGRAM Subroutine

    TMS320F2XX Flash Utilities.
     Revision: 2.0,  9/10/97
     Revision: 2.0b, 12/5/97
     Revision: 2.1,  1/31/98

     Changes20: Re-written to include latest flash algorithms.
     Changes20b: Changed conditional branch on line 185 near
	  row-done label from GEQ to GT, to prevent
	  skipping of last address on sections that end
	  with a mult of 32d address (020h,040h,etc.)
     Changes21: Cleaned up source for release to mass market.
	  Replaced the manual 2s-comp in adj_row with
	  neg instruction. Removed extra branch at top
	  of GPGMJ. Created PRG_BYTE subroutine for use
	  on both high and low bytes. Changed variable
	  names from B2_ to BASE_ since they're not
	  necessarily stored in B2 RAM. Added more
	  comments.

  SUTILS4  ASM
   Delay And Access Mode Subroutines

   TMS320F2XX Flash Utilities.
    Revision: 2.0,  9/10/97
    Revision: 2.1,  1/31/98

    Modified for F2xx : Sam Saba                   12/24/96
    Changes20: Changed DELAY parameter passing to use AR6
       instead of a RAM location.
    Changes21: Added conditional assembly statements to REGS
       and ARRAY subroutines for F206 versus F24X.

    Called by: These utilites are used by CLEAR,ERASE,
       PROGRAM algorithms written for F2xx devices.
       Function : DELAY - Delay loop specified by AR6.
       REGS  - Clears MODE bit of F_ACCESS0/1 to
	 access flash module control registers.
       ARRAY - Sets MODE bit of F_ACCESS0/1 to access
	 the flash array.
  SVAR4    H
    Variable declaration file

    TMS320F2XX Flash Utilities.
     Revision: 2.0,  9/10/97
     Revision: 2.1,  1/31/98

     Modified for F2xx: Sam Saba                      7/07/97
     Changes20: Removed some unused variables. Added FL_ST and
       FL_END. Tweaked DLOOP constants. Added more comments.
     Changes21: Added conditional assembly variable F24X, to
       distinguish between F24X and F206 devices.
       This is required because of RAM constraints on
       F24X. Changed variable names from B2_ to BASE_
       since they're actually relocatable.
  SCLR4    ASM
   CLEAR  Subroutine

   TMS320F2XX Flash Utilities.
    Revision: 2.0,  9/10/97
     Revision: 2.1,  1/31/98

    Changes20: Re-written to include latest flash algorithms.
    Changes21: Cleaned up source for release to mass market.
     Initialize error flag to 0 (no error). Removed
     redundant call/ret to clear routine. Changed
     variable names from B2_ to BASE_ since they're
     not necessarily stored in B2 RAM. Removed imr
     modifications. Created PRG_BYTE subroutine for
     use on both high and low bytes. Added more
     comments.

  HISTORY  ASM Этот файл

  INDAC    ASM
   таблица данных для прогона измерения на симуляторе

  MAX_ANAL ASM
   MaximumAnalysis()  - Анализ предполагаемого импульса

  MEAS_FIN ASM
   окончание измерение, анализ ошибок измерения
   прогноз шедулера

  PR_A_STP ASM
    Pressure_augment_stop() - Процесс остановки нагнетания давления
    При переключении в этот режим необходимо задать:
    1. Время до выключения клапана (ModeCnt = VALVE_WHITE_TIME)!
    2. Определить давление включения клапана ( NewPressure )
    3. SubroutMode = 0;

  PR_A_T40 ASM
    накачка давления до 40(80)мм.рт.столба

  PR_DIMIN ASM
   Pressure_diminution() - Процесс понижения давлени на 8 мм.рт.ст.
   При переключении в этот режим:
   1. выключить клапан !
   2. Определить давление включения клапана ( NewPressure )
   3. SubroutMode = 0;

  PRESS_M  ASM
   Pressure_measurement() - Процесс измерения давления

  PRESSAUG ASM
   Pressure_augment( PressureTop ) -
    Увеличение давления до систолическое+30 мм.рт.ст.

  PROCEDUR ASM
   процедуры для процесса измерения давления

  PUL_F_E  ASM
   оценка частоты пульса

  ST_SHIFT ASM
   вычисление смещения датчика давления
  TODO     ASM
   что "желательно" сделать

  TREND    ASM
   Trend_measurement_1() - Процесс измерения Trend-a
		     и амплитуд пульсаций.

 =[ 23.06.00 v0.0.1 ]================================================

 ■ bpserial.asm добавлены служебные функции (0CC,0CC,XX,XX)
   01.Проконтролировать Flash давления
   02.Проконтролировать Flash ЭКГ
   03.Разрешить модификацию памяти прибора(пароль)
   04.Переписать область flash памяти
      данных в память программ
   bpflash.asm объявлена секция "PrgAlgor" которая компилируется
   при установке ключа SerialProg 1 - процедуры включены,
   0 - процедуры выключены. секция линкуется последовательно (!!!) с
   секциями алгоритма программирования программной флеш. но при этом
   адрес запуска устанавливается 0x8000, куда она и копируется для
   запуска процесса программирования. программа предварительно
   прошивается во флеш данных по адресу 0x1f0000-0x1fffff.
   пароль установлен в восемь символов "peterltd"

 =[ 23.06.00 v0.0.1 ]================================================
  bpserial.asm добавлен блок автоподстройки на фиксированные
   скорости 57.6,38.4,19.2,9.6
 ■ bpadcpro.asm полностью рестуризированна полность
   теперь считывает все входы АЦП и записывает все в массив
   подстройка ЦАП по фиксированному коэффициенту усиления
   осталась (пока не проверял работу)
   процедура сделана с сохранением всех регистров
   без использования промежуточных ячеек (кроме стека и ACC)
 √ вроде все процедуры работы с флеш проверены на
   работоспособность (правки писать не буду, слишком много)
 √ 0x1f0000-0x1fffff добавить стерку и этого адреса
   (bserial.asm вариант для последовательной флеш)
  добавлен дефайнер SerialProg 	.set 1
   метод программирования по последовательному порту
   1 - процедуры включены
   0 - процедуры выключены
 =[ 04.07.00 v0.0.1 ]================================================
 √ для последовательной флеш минимум 20 ms для "стабилизации"
   bp_init. уже есть задержка при очистки памяти, но вроде не хватает
  добавлен дефайнер для отладки bp206.asm
   DebugSerial	.set 0
   в сериальном порту включается блок отладки, в котором
   порт после принятия символа A начинает выдавать 58h
   1 вкл 0 выкл
 =[ 04.07.00 v0.0.1 ]================================================
  пересматриваем работу по SPI
   TLC 5615
    - включено через инвертор
    - защелкивает по переднему фронту
    - для начала измерения необходимо SCK=0 (SETC XF) (обязательно!)
   TLC 2543
    - включено через инвертор
    - защелкивает по переднему фронту
    - для начала измерения необходимо SCK=0 (SETC XF)
   AT45D161
    - включено через инвертор
    - защелкивает по переднему фронту
    - для начала измерения необходимо SCK=1 (CLRC XF) (обязательно!)
   TMS
    - защелкивает данные по заднему фронту
    - действия совершает по переднему фронту (загрузка данных)
    цикл, который был до недавнего времени "забит"
    CLRC 	XF
    SETC 	XF
    при этом SPI самостоятельно (SETC XF это делал) выходил из режима
    передачи.

   делаем следующее:
    - для операций с флеш переписать (начинать с SCK=1 (CLRC XF))
    - программирование AVR производить по схеме собственной
 =[ 00-12-08 v0-0-2 ]================================================
 ■ расписали где должен быть серийный номер
 =[ 00-12-13 v0-0-3 ]================================================
 √ подправлено сохранение времени после измерения на третьи сутки
 =[ 00-12-14 v0-0-4 ]================================================
 √ вылавливаем глюки по сохранению времени на третьи сутки
   написана BCD2BIN и BIN2BCD
   поменял каналы ЭКГ местами
 √ исправил ошибку: второй канал брался с усиленного выхода
 =[ 00-12-15 v0-0-5 ]================================================
 ■ теперь ошибка Low Battery должна высвечиваться как " LLL"
 =[ 00-12-20 v0-0-6 ]================================================
 ■ исправлена ошибка по вычислению скорости накачки
   Зыков подправил шаг ступеньки
 =[ 00-12-22 v0-0-7 ]================================================
 ■ вывел debug версию (без ЭКГ) в отдельный файл и батник
 =[ 01-01-12 v0-0-8 ]================================================
 ■ вывел debug версию (для паралельной флеш) в отдельный файл и батник
 ■ программатор завел в репозитарий
 =[ 01-01-16 v0-0-8-1 ]===============================================
   создал отдельную ветку
   в ней делаю правку 099 ошибки
 =[ 01-01-16 v0-0-8-2 ]===============================================
   * если проводим измерение и очень низкий уровень давления
    mEnd_error_meas rMEASURMENT_ON_LOW	заменил на 088
 =[ 01-01-16 v0-0-9 ]================================================
   слил ветку v0-0-8-2 с основной
 =[ 01-01-16 v0-0-9-1 ]================================================
   ветка с новым алгоритмом Андрея Зыкова (два импульса на ступеньке)
 =[ 01-01-16 v0-0-9-2 ]================================================
   подправил rm на del в батниках компиляции
 =[ 01-01-16 v0-0-9-3 ]================================================
  проверяю работу на ветке
 =[ 01-01-16 v0-0-9-4 ]================================================
  Андрей еще подправил алгоритм


 =[ 01-01-16 v0-0-9-4-0 ]================================================
  делаем еще ветку, для экспериментов. удыоенная частота дискретизации
  и вывод значений до фильтра (программного)
 =[ 01-01-16 v0-0-9-4-1 ]================================================
  commit-им все это безобразие
 =[ 01-01-16 v0-0-9-4-2 ]================================================
  правим некоторые "безобразия" слияния с версией v0-0-12-1


 =[ 01-01-16 v0-0-10 ]================================================
   нарисовал дерево
 =[ 01-01-?? v0-0-11 ]================================================
   добавил для сертификации: тестовый режим часов, его запуск через
   последовательный порт (еще не проверял работу)


 =[ 01-01-25 v0-0-11-0 ]================================================
   открываю ветку для отладки фифошки последовательной флеш
 =[ 01-01-26 v0-0-12 ]================================================
   тестовый режим часов, проверял работу, исправил ошибки


 =[ 01-01-26 v0-0-12-0 ]================================================
   делаем ветку для правки: запись без фильтра


 =[ 01-01-26 v0-0-13 ]================================================
   наделал правок, в связи с внесением и слиянием веток
   необходимо еще картинки дорисовать (дерево графическое)
 =[ 01-02-12 v0-0-14 ]================================================
   исправил дурацкую ошибку : не было звукового сигнала на 15-ой минуте
   тестового режима для сертификации
 =[ 01-02-12 v0-0-15 ]================================================
   в сертификационном режиме, теперь, ведется запись сигналов во флеш
   поменял переход на режим накачки до 160 мм, теперь он переходит
   туда после накачки до 40 (40+10) мм рт столба
 =[ 01-02-15 v0-0-16 ]================================================
   сделал более "цивильную" работу с флагами
 =[ 01-02-15 v0-0-17 ]================================================
   отстроил дерево (branche.rev)
 =[ 01-02-15 v0-0-18 ]================================================
   c:\cvs\cvs update -j v0-0-9-1
   произвел слияние с веткой v0-0-9-1 (последний tag на 
   момент слияния v-0-0-9-4) с новым алгоритмом Андрея Зыкова
   (два импульса на ступеньке)


 =[ 01-02-18 v0-0-19 ]================================================
   открываю новую ветку для организации фифошки
 =[ 01-02-18 v0-0-19-0 ]================================================
   открыл новую ветку для написания фифошки
 =[ 01-02-18 v0-0-19-1 ]================================================
   поехали
 =[ 01-02-18 v0-0-19-2 ]================================================
   приехали
   к существующим процедурам добавил фифошку, теперь вперед, на отладку
 =[ 01-02-19 v0-0-19-3 ]================================================
   исправил пару ошибок
 =[ 01-02-20 v0-0-19-4 ]================================================
   увеличил размер фифошки с 16 до 32, стало вроде нормально (совпадает
   с теорией)


 =[ 01-02-18 v0-0-20 ]================================================
   сливаю (не в том смысле ;) основную ветку, с веткой v0-0-19-0
   (конечный tag v0-0-19-4), где вроде бы работает фифошка.



 =[ 01-02-18 v0-0-20-0 ]================================================
   открываю новую ветку, для добавления детского режима
 =[ 01-02-18 v0-0-20-1 ]================================================
   надо в параметры программирования прибора добавить
   - Возраст (лет)	1	Беззнаковое целое число
   Менее 14  лет - считается ребенком
   - Порог изменения результатов измерения	1
   Величина относительного изменения (в процентах) одного из измеренных
   значений давления или ЧСС по сравнению с усредненной величиной за 4
   предыдущих измерения, при превышении которой проводится повторное измерение
   - Максимальное давление в манжете	1
   Величина давления в манжете, которую нельзя превышать для данного пациента,
   значение соответствует истинному минус 48 (мм.рт.ст.)
   Рекомендуемые значения:
   Для детей - (190 - 48)
   Для взрослых (290 - 48) [2001-01-29]	Диапазон от 48 до 300
   - Детский/взрослый	1
   5Ah - детский
   A5h - взрослый [2001-01-29]
   - Подтверждение режима Детский/взрослый	1
   FFh - не подтвержден
   5Ah - детский
   A5h - взрослый [2001-01-29]	Поле устанавливается прибором
 =[ 01-02-18 v0-0-20-2 ]================================================
   привел в соответствие ТУ на прибор(bp005-6) с внутренними структурами данных
   касательно параметров программирования прибора
 =[ 01-02-18 v0-0-20-3 ]================================================
   забабахали детский режим, след этап отладка
   (ограничение еще программное у TMS не забыть сделать anal_end)
 =[ 01-02-18 v0-0-20-4 ]================================================
   исправил "синтаксические" ошибки
 =[ 01-02-21 v0-0-20-5 ]================================================
   добавил инициализацию переменных для режима измерения при сертификации
   чтобы шагал по ступенькам
 =[ 01-02-21 v0-0-20-6 ]================================================
   детский/взрослый работает. добавить команду для AVR необходимо.
 =[ 01-02-22 v0-0-20-7 ]================================================
   должен засылать команду детский/взрослый для AVR.
   заодно добавил и посылку сигнала beeplitle 0.45 сек
 =[ 01-02-22 v0-0-20-8 ]================================================
   исправил ошибки связанные с выдачей короткого звукового сигнала
 =[ 01-02-22 v0-0-20-9 ]================================================
   написал: проверку выдачи звукового сигнала
            проверку выдачи результатов измерения
   исправил установку первоначальной накачки давления после ошибки



 =[ 01-02-23 v0-0-21 ]================================================
   объеденяю изменения на ветке v0-0-20-0 (до tag v0-0-20-9 включительно)


 =[ 01-02-23 v0-0-21-0 ]================================================
   Андрей на этой ветке будет "творить"
 =[ 01-02-23 v0-0-21-1 ]================================================
  стравливание на 8 мм но не до конца
 =[ 01-02-23 v0-0-21-2 ]================================================
  Версия алгоритма 8 мм, на 12.03.01
  выявлена ошибка одновременного использования  имяни Temp



 =[ 01-03-15 v0-0-21-2-0 ]================================================
  открываю ветку для изменения порога по трем импульсам
 =[ 01-03-15 v0-0-21-2-1 ]================================================
  Изменены пороги по амплитуде на CONST_0499
 =[ 01-03-17 v0-0-21-2-3 ]================================================
  Изменены пороги по амплитуде на 0.249(для 2-х) и 0.35(для 3-х)



 =[ 01-03-17 v0-0-21-2-3-0 ]================================================
  Новая ветка изменяется подсчет результата
 =[ 01-03-18 v0-0-21-2-3-1 ]================================================
  Боpба с потеpей пульса
 =[ 01-03-19 v0-0-21-2-3-2 ]================================================
  конвертер для Андрея
  те строчки, которые с символом ";" в начале строки оставляем,
  остальные выкусываем.
 =[ 01-03-19 v0-0-21-2-3-3 ]================================================
  исправил мелкие ошибки в конверторе,
  строки, в которых символ ';' стоит не в начале строки тоже убираем
 =[ 01-03-20 v0-0-21-2-3-4 ]================================================
  Испpавлены ошибки пpи вычислении систолы идиастолы (залезли в знак.pазpяд)
 =[ 01-03-20 v0-0-21-2-3-5 ]================================================
  Поправлен коментарий для сохранения его в "C"



 =[ 01-02-26 v0-0-22 ]================================================
   подправил шагание по ступенькам для сертификации
 =[ 01-02-26 v0-0-22-0 ]================================================
   версия на ветке будет, которая запускает измерения от AVR


 =[ 01-03-06 v0-0-23 ]================================================
   v0-0-22-0 умерла так и не начавшись


 =[ 01-03-06 v0-0-23-0 ]================================================
   ветка с версией powerdown


 =[ 01-03-20 v0-0-24 ]================================================
  сливаю с основным стволом версию v0-0-21-2-3-0 по v0-0-21-2-3-5 включительно
 =[ 01-03-20 v0-0-25 ]================================================
  когда алгоритм пытается мерить на слишком низком уровне давления
  rMEASURMENT_ON_LOW	.set	046
	.word	09400h+094	;46 - фальш режим - не обнаружена диастола
  данную ошибку вынес в раздел для причины сделать повторное измерение


 =[ 01-03-23 v0-0-26 ]================================================
  открываю ветку v0-0-26-0 чтобы при сертификации ходил короткими шагами
 =[ 01-03-26 v0-0-26-1 ]================================================
  написал, теперь необходимо проверять
 =[ 01-03-26 v0-0-26-2 ]================================================
  ошибся в порядке "поступления" режимов (при включенном отладочном)
  первая ступенька идет "проверка превышения систолического давления"
  ее тоже заменил на двух секундную
  - не будет трехминутных повторов в сертификационной версии


 =[ 01-03-23 v0-0-27 ]================================================
  открываю ветку v0-0-27-0 чтобы написать обмен с флеш, больше чем 2Mbyte
 =[ 01-03-26 v0-0-27-1 ]================================================
  написал версию, чтобы видела вторую половинку в четырех мегабайтной флеш
  .if Mem=20		;одна микросхема на 2 Mbyte
  .elseif Mem=40	;одна микросхема на 4 Mbyte
  ошибку, связанную с незаполнение таблицы результатов при переполнении флеш
  пока не нашел
 =[ 01-03-26 v0-0-27-2 ]================================================
  словные переменные, о том что мы подсчитали количество записей во флеш
  и признак нехватки места во флеш под сфинмограммы перенес в битовые области
  Jobs
 =[ 01-04-10 v0-0-27-3 ]================================================
  CountWrite тоже необходимо сделать битовой
  исправил некоторые ошибки, связанные с измерениями, в которых нет данных
 =[ 01-04-12 v0-0-27-4 ]================================================
  исправлена ошибка, когда флеш переполняется в процессе измерения
 =[ 01-04-12 v0-0-27-5 ]================================================
  в обмен по последовательному порту добавлен код, при одной флешке
  с четырьмя мегабайтами
 =[ 01-04-12 v0-0-27-6 ]================================================
  поправил описание в сигнатуре, касаемое размера кластера
 =[ 01-04-12 v0-0-27-7 ]================================================
  разметка выравнивалась на размер кластера 32 байта
  поправил, чтобы выравнивалась на новый размер кластера


 =[ 01-03-23 v0-0-28 ]================================================
  открываю ветку v0-0-28-0 чтобы написать формулу усреднения (спросить у Зыкова)



 =[ 01-03-23 v0-0-29 ]================================================
  открываю ветку v0-0-29-0 чтобы написать
   измерение было начато по нажатию на кнопку (ввести в таблицу опознавательный
   бит) 6 бит в таблице измерения в поле секунды отведен под признак
   ручного измерения (измерение по нажатой кнопке)
 =[ 01-03-26 v0-0-29-1 ]================================================
   ввел бит-признак того, что измерение было начато по нажатию на кнопку
   6 бит в таблице измерения в поле секунды отведен под признак
   ручного измерения (измерение по нажатой кнопке)
   в Jobs за это отвечает 13 бит



 =[ 01-03-26 v0-0-30 ]================================================
  пытаюсь запустить версию для прибора со старой платой и параллельной флеш
 =[ 01-03-26 v0-0-31 ]================================================
  вроде работать должно, есть только плюшка (или программная или аппаратная:
  прибор сбрасывается при нажатию на кнопку)
 =[ 01-04-05 v0-0-32 ]================================================
  добавил несколько записей в todo
 =[ 01-04-09 v0-1 ]================================================
  исправил мелкую ошибку при инициализации (забыл MAR)
  открываю ветку для Андрея v0-1-0 (алгоритм обнаружения пульса)



 =[ 01-04-11 v0-1-1 ]================================================
  сливаю в основной ствол ветку v0-0-26-0 (v0-0-26-2 включительно)
  ветка v0-0-26-0, чтобы при сертификации ходил короткими шагами
 =[ 01-04-19 v0-1-2 ]================================================
  добавил в todo новые записи
 =[ 01-04-23 v0-1-3 ]================================================
  исправлена "досадная" ошибка при определении пульса на 80 мм.
 =[ 01-04-26 v0-1-4 ]================================================
  Изменили константу ThresholdOfMax для PRESS_60
  ThresholdOfMax = MAX_THRESHOLD_SISTOL;
  раньше было ThresholdOfMax = MAX_THRESHOLD_40MM-MIN_THRESHOLD_40MM;
 =[ 01-04-26 v0-1-5 ]================================================
  сливаю изменения с веткой v0-0-29-0 (по v0-0-29-1 включительно)
  6 бит в таблице измерения в поле секунды отведен под признак
  ручного измерения (измерение по нажатой кнопке)
 =[ 01-04-26 v0-1-6 ]================================================
  сливаю изменения с веткой v0-0-27-0 (по v0-0-27-7 включительно)
  написать обмен с флеш, больше чем 2Mbyte
  еще осталась ошибка, связанная с измерениями больше чем 255 (переполнение)
  но вряд ли до этого сейчас дойдет

